<!DOCTYPE html>
<html use-expressions="true" auto-config="true"
	xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
	<title>BookFair - Books</title>
	<link rel="stylesheet" href="/css/stile5.css" />
	<link rel="icon" type="image/png" href="/images/favicon.png">
</head>

<body>
	<div class="top-section">
			<nav>
				<div class="nav__header">
					<div class="nav__logo">
						<a href="#"><img src="/images/logo1.png" alt="logo" /></a>
					</div>
				</div>
				<ul class="nav__links" id="nav_links">
					<li><a href="/">Home</a></li>
					<li><a href="/book">Books</a></li>
					<li><a href="/author">Authors</a></li>
					<li>
						<div th:if="${userDetails}">
							<b th:text="${userDetails.username}" class="username"></b>
							<button class="btn" type="button">
								<a href="/logout" class="log">Logout</a>
							</button>
						</div>
						<div th:unless="${userDetails}">
							<button class="btn" type="button">
								<a href="/login" class="log">
									<span><i class="ri-login-box-line"></i></span>Login
								</a>
							</button>
						</div>
					</li>
				</ul>
			</nav>
	<header>
		<div class="section__container header__container" id="home">
			<h1>Let's find your next read!</h1>
			<!-- <div th:if="${ #authorization.expression('isAuthenticated()') and #strings.contains(#authentication.principal.authorities,'ADMIN')}">          
    			<a th:href="@{/somelink}">ADMIN LINK</a>
 			</div>
 			<div th:if="${ #authorization.expression('isAuthenticated()') and #strings.contains(#authentication.principal.authorities,'DEFAULT')}">          
    			<a th:href="@{/somelink}">DEFAULT LINK</a>
 			</div> -->
		</div>
	</header>

	<section class="section__container arrival__container" id="catalogue">
		<h2 class="section__header">Books</h2>
		<div th:if="${books == null or books.isEmpty()}">
            Non ci sono libri nel sistema
        </div>
		<!--	<ul>
				<div class="arrival__card">
					<li th:each="book : ${books}">
			<a th:href="@{'/book' + '/' + ${book.id}}"
				th:text="${book.title} + ' (' + ${book.year} + ')'">Up! (2000)</a>
			<div th:unless="${book.author}">
			<a th:href="@{'/admin/addAuthor/' + ${book.id}}">Aggiungi autore</a>
		</div>
		</li>
				</div>		
		</ul> -->
        <!-- <div th:unless="${books.isEmpty()}">
			<div th:each="book : ${books}"></div>
				<div class="arrival__card">
					<a th:href="@{'/book' + '/' + ${book.id}}">
						<img th:src=${book.urlOfPicture} />
						<div class="arrival__content">
							<a th:href="@{'/book' + '/' + ${book.id}}"
								th:text="${book.title}">Up! (2000)</a>
						</div>
					</a>
					
				</div>
			
            </div> 
			
        </div> -->
        
        </section>
        
        <section class="portfolio" id="portfolio">
      <div class="section__container portfolio__container">
        
        <h2 class="section__header">Books by this author</h2>
        <div class="portfolio__nav">
          
        </div>
       
        <div class="portfolio__grid">
          <div th:each="book : ${books}" class="portfolio__card">
			   <img th:src="@{'data:image;base64,' + ${book.photo}}" alt="Book Cover">
             <a th:href="@{/book/{id}(id=${book.id})}" class="book-title" th:text="${book.title}"></a>
          
				<span th:text="${book.year}">2000></span>
			
          </div>
          
        </div>
        
       
    </section>
    
        <div class="container3">
	    <div class="book-list">
        <!-- Iterate over the list of books passed from the controller -->
        <div th:each="book : ${books}" class="book-item">
            <img  th:src="@{'data:image;base64,' + ${book.photo}}" width="180" height="90" alt="Book Cover">
            <a th:href="@{/book/{id}(id=${book.id})}" class="book-title" th:text="${book.title}"></a>
            <p>
  				<span th:each="author, iterStat : ${book.authors}">
    				<a th:href="@{/author/{id}(id=${author.id})}" class="book-author" th:text="${author.surname + ' ' + author.name}"></a>
   					<span th:if="${!iterStat.last}">, </span>
  				</span>
			</p>

        </div>
    </div>
	</div>
        
	
</body>

</html>
